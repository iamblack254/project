<%- include('partials/header') %>
<main>
  <section id="contact" class="contact py-5">
    <div class="container">
      <div class="section-title text-center mb-5 animate__animated animate__fadeIn">
        <span class="badge bg-primary px-3 py-2 mb-3">CONTACT US</span>
        <h2 class="display-4 fw-bold">Get In Touch</h2>
        <p class="text-muted mx-auto" style="max-width: 600px;">We're here to answer your questions and help with your real estate needs</p>
      </div>

      <div class="row g-5">
        <div class="col-lg-5">
          <div class="info-card rounded-4 overflow-hidden animate__animated animate__fadeInLeft">
            <div class="position-relative">
              <div class="bg-gradient-primary text-white p-4 position-relative" style="background-image: linear-gradient(135deg, #0d75ec 0%, #1a90ff 100%);">
                <div class="position-relative z-2">
                  <h3 class="fs-4 fw-bold">Contact Information</h3>
                  <p class="mb-0 opacity-75">Reach out to us directly or fill out the form</p>
                </div>
                <div class="position-absolute top-0 end-0 pe-none">
                  <svg width="200" height="200" viewBox="0 0 200 200" fill="none" xmlns="http://www.w3.org/2000/svg" style="opacity: 0.2; transform: translateX(30%) translateY(-30%);">
                    <path d="M42.8 0C18.6 0 0 18.6 0 42.8v114.4C0 181.4 18.6 200 42.8 200h114.4c24.2 0 42.8-18.6 42.8-42.8V42.8C200 18.6 181.4 0 157.2 0H42.8zm97.7 50.7c5.3 0 9.6 4.3 9.6 9.6s-4.3 9.6-9.6 9.6-9.6-4.3-9.6-9.6c0-5.3 4.3-9.6 9.6-9.6zm-75 0c5.3 0 9.6 4.3 9.6 9.6s-4.3 9.6-9.6 9.6-9.6-4.3-9.6-9.6c0-5.3 4.3-9.6 9.6-9.6zm37.5 0c5.3 0 9.6 4.3 9.6 9.6s-4.3 9.6-9.6 9.6-9.6-4.3-9.6-9.6c0-5.3 4.3-9.6 9.6-9.6zm0 27.8c29.4 0 53.3 23.9 53.3 53.3 0 29.4-23.9 53.3-53.3 53.3s-53.3-23.9-53.3-53.3c0-29.4 23.9-53.3 53.3-53.3z" fill="currentColor"/>
                  </svg>
                </div>
              </div>
              
              <div class="bg-white p-4">
                <div class="contact-item d-flex align-items-center mb-4 animate__animated animate__fadeInUp">
                  <div class="icon-box bg-light rounded-circle d-flex align-items-center justify-content-center me-3" style="width: 50px; height: 50px; box-shadow: 0 4px 10px rgba(13,117,236,0.15);">
                    <i class="bi bi-geo-alt text-primary fs-4"></i>
                  </div>
                  <div>
                    <h5 class="mb-1 fs-5 fw-semibold">Our Location</h5>
                    <p class="mb-0 text-muted">Nairobi<br>Katani road, Syokimau<br>P.O. BOX 00100</p>
                  </div>
                </div>
                
                <div class="contact-item d-flex align-items-center mb-4 animate__animated animate__fadeInUp" style="animation-delay: 0.2s;">
                  <div class="icon-box bg-light rounded-circle d-flex align-items-center justify-content-center me-3" style="width: 50px; height: 50px; box-shadow: 0 4px 10px rgba(13,117,236,0.15);">
                    <i class="bi bi-envelope text-primary fs-4"></i>
                  </div>
                  <div>
                    <h5 class="mb-1 fs-5 fw-semibold">Email Us</h5>
                    <p class="mb-0"><a href="mailto:harmonygates2024@gmail.com" class="text-decoration-none text-muted hover-primary">harmonygates2024@gmail.com</a></p>
                  </div>
                </div>
                
                <div class="contact-item d-flex align-items-center mb-4 animate__animated animate__fadeInUp" style="animation-delay: 0.4s;">
                  <div class="icon-box bg-light rounded-circle d-flex align-items-center justify-content-center me-3" style="width: 50px; height: 50px; box-shadow: 0 4px 10px rgba(13,117,236,0.15);">
                    <i class="bi bi-phone text-primary fs-4"></i>
                  </div>
                  <div>
                    <h5 class="mb-1 fs-5 fw-semibold">Call Us</h5>
                    <p class="mb-0"><a href="tel:0103400461" class="text-decoration-none text-muted hover-primary">0103400461</a></p>
                  </div>
                </div>

                <hr class="my-4" style="opacity: 0.1;">

                <h6 class="text-uppercase fs-6 fw-semibold text-muted mb-3">Follow Us</h6>
                <div class="social-links d-flex gap-2 animate__animated animate__fadeInUp" style="animation-delay: 0.6s;">
                  <a href="#" class="btn btn-light rounded-circle p-0 d-flex align-items-center justify-content-center" style="width: 40px; height: 40px; transition: all 0.3s ease; box-shadow: 0 4px 10px rgba(0,0,0,0.05);">
                    <i class="bi bi-facebook"></i>
                  </a>
                  <a href="#" class="btn btn-light rounded-circle p-0 d-flex align-items-center justify-content-center" style="width: 40px; height: 40px; transition: all 0.3s ease; box-shadow: 0 4px 10px rgba(0,0,0,0.05);">
                    <i class="bi bi-twitter-x"></i>
                  </a>
                  <a href="#" class="btn btn-light rounded-circle p-0 d-flex align-items-center justify-content-center" style="width: 40px; height: 40px; transition: all 0.3s ease; box-shadow: 0 4px 10px rgba(0,0,0,0.05);">
                    <i class="bi bi-instagram"></i>
                  </a>
                  <a href="#" class="btn btn-light rounded-circle p-0 d-flex align-items-center justify-content-center" style="width: 40px; height: 40px; transition: all 0.3s ease; box-shadow: 0 4px 10px rgba(0,0,0,0.05);">
                    <i class="bi bi-linkedin"></i>
                  </a>
                </div>
              </div>
            </div>
            
            <div class="map-container mt-3 rounded-4 overflow-hidden shadow-sm animate__animated animate__fadeIn" style="animation-delay: 0.8s;">
              <iframe 
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d249.29241457039095!2d36.93891352123471!3d-1.369506971018049!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x182f0d20ae80632b%3A0xbb5f0cb6ee187716!2sSleekedge%20Family%20Salon%20%26%20Barber%20Shop%2C%20Syokimau!5e0!3m2!1sen!2ske!4v1725971654116!5m2!1sen!2ske" 
                style="border:0; width: 100%; height: 250px;" 
                allowfullscreen="" 
                loading="lazy" 
                referrerpolicy="no-referrer-when-downgrade">
              </iframe>
            </div>
          </div>
        </div>
        
        <div class="col-lg-7">
          <div class="contact-form-card rounded-4 p-4 p-lg-5 animate__animated animate__fadeInRight">
            <h3 class="mb-4 pb-2 fw-bold">Send Us a Message</h3>
            
            <form id="contact-form" method="post" role="form" class="needs-validation" novalidate>
              <div class="row g-3">
                <div class="col-md-6">
                  <div class="form-group floating-label mb-3 position-relative">
                    <input type="text" class="form-control form-control-lg border-0 bg-light rounded-3 ps-4" id="name" name="name" placeholder=" " required style="height: 60px; padding-top: 1.25rem;">
                    <label for="name" class="position-absolute ps-4 text-muted small" style="top: 0.5rem; left: 0; transition: all 0.2s ease;">
                      <i class="bi bi-person me-2"></i>Your Name
                    </label>
                    <div class="invalid-feedback">Please enter your name</div>
                  </div>
                </div>
                
                <div class="col-md-6">
                  <div class="form-group floating-label mb-3 position-relative">
                    <input type="email" class="form-control form-control-lg border-0 bg-light rounded-3 ps-4" id="email" name="email" placeholder=" " required style="height: 60px; padding-top: 1.25rem;">
                    <label for="email" class="position-absolute ps-4 text-muted small" style="top: 0.5rem; left: 0; transition: all 0.2s ease;">
                      <i class="bi bi-envelope me-2"></i>Your Email
                    </label>
                    <div class="invalid-feedback">Please enter a valid email</div>
                  </div>
                </div>
                
                <div class="col-md-6">
                  <div class="form-group floating-label mb-3 position-relative">
                    <input type="tel" class="form-control form-control-lg border-0 bg-light rounded-3 ps-4" id="tel" name="tel" placeholder=" " required style="height: 60px; padding-top: 1.25rem;">
                    <label for="tel" class="position-absolute ps-4 text-muted small" style="top: 0.5rem; left: 0; transition: all 0.2s ease;">
                      <i class="bi bi-phone me-2"></i>Phone Number
                    </label>
                    <div class="invalid-feedback">Please enter your phone number</div>
                  </div>
                </div>
                
                <div class="col-md-6">
                  <div class="form-group mb-3 position-relative">
                    <select class="form-select form-select-lg border-0 bg-light rounded-3 ps-4" id="interest" name="interest" required style="height: 60px;">
                      <option value="" selected disabled>Select your interest</option>
                      <option value="Interior Design">Interior Design</option>
                      <option value="Property Management">Property Management</option>
                      <option value="Property Valuation">Property Valuation</option>
                      <option value="Property Sale">Property Sale</option>
                      <option value="Residentials (Rentals)">Residentials (Rentals)</option>
                      <option value="Land">Land</option>
                      <option value="Other">Other</option>
                    </select>
                    <label class="position-absolute text-muted small ps-4" style="top: 0.5rem; left: 0;">
                      <i class="bi bi-building me-2"></i>I'm Interested In
                    </label>
                    <div class="invalid-feedback">Please select your area of interest</div>
                  </div>
                </div>

                <div class="col-12">
                  <div class="form-group floating-label mb-3 position-relative">
                    <input type="text" class="form-control form-control-lg border-0 bg-light rounded-3 ps-4" id="subject" name="subject" placeholder=" " required style="height: 60px; padding-top: 1.25rem;">
                    <label for="subject" class="position-absolute ps-4 text-muted small" style="top: 0.5rem; left: 0; transition: all 0.2s ease;">
                      <i class="bi bi-chat-left-text me-2"></i>Subject
                    </label>
                    <div class="invalid-feedback">Please enter a subject</div>
                  </div>
                </div>
                
                <div class="col-12">
                  <div class="form-group floating-label mb-4 position-relative">
                    <textarea class="form-control border-0 bg-light rounded-3 ps-4 pt-5" id="message" name="message" rows="5" style="min-height: 160px; padding-top: 1.5rem;" placeholder=" " required></textarea>
                    <label for="message" class="position-absolute ps-4 text-muted small" style="top: 0.5rem; left: 0; transition: all 0.2s ease;">
                      <i class="bi bi-chat-quote me-2"></i>Your Message
                    </label>
                    <div class="invalid-feedback">Please enter your message</div>
                  </div>
                </div>
                
                <div class="col-12">
                  <div class="d-grid">
                    <button type="submit" class="btn btn-primary btn-lg py-3 rounded-3" style="letter-spacing: 0.5px;">
                      <i class="bi bi-send me-2"></i>Send Message
                    </button>
                  </div>
                </div>

                <div class="col-12 mt-3">
                  <div class="alert alert-success d-none success-message rounded-3 border-0 shadow-sm">
                    <div class="d-flex align-items-center">
                      <div class="bg-success bg-opacity-10 rounded-circle p-2 me-3">
                        <i class="bi bi-check-circle text-success fs-4"></i>
                      </div>
                      <div>
                        <h6 class="mb-1">Success!</h6>
                        <p class="mb-0">Your message has been sent successfully!</p>
                      </div>
                    </div>
                  </div>
                  <div class="alert alert-danger d-none error-message rounded-3 border-0 shadow-sm">
                    <div class="d-flex align-items-center">
                      <div class="bg-danger bg-opacity-10 rounded-circle p-2 me-3">
                        <i class="bi bi-exclamation-triangle text-danger fs-4"></i>
                      </div>
                      <div>
                        <h6 class="mb-1">Error!</h6>
                        <p class="mb-0">An error occurred. Please try again.</p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </section>

  <script>
    // Form validation
    (() => {
      'use strict'
      const forms = document.querySelectorAll('.needs-validation');
      Array.from(forms).forEach(form => {
        form.addEventListener('submit', event => {
          if (!form.checkValidity()) {
            event.preventDefault();
            event.stopPropagation();
          }
          form.classList.add('was-validated');
        }, false);
      });
    })();

    // Form submission
    document.getElementById('contact-form').addEventListener('submit', function(event) {
      event.preventDefault(); // Prevent the form from submitting the default way
      
      if (!this.checkValidity()) {
        event.classList.add('was-validated');
        return;
      }
      
      // Extract form data
      const formData = new FormData(this);
      const interestValue = document.getElementById('interest').value;
      
      // Show loading state
      const submitButton = this.querySelector('button[type="submit"]');
      const originalButtonText = submitButton.innerHTML;
      submitButton.innerHTML = '<span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span> Sending...';
      submitButton.disabled = true;
      
      // Configure form for FormSubmit
      this.action = "https://formsubmit.co/harmonygates2024@gmail.com";
      
      // Send data to backend first
      fetch('/contact/email', {
        method: 'POST',
        body: JSON.stringify({
          name: formData.get('name'),
          email: formData.get('email'),
          number: formData.get('tel'),
          interest: interestValue,
          subject: formData.get('subject'),
          message: formData.get('message')
        }),
        headers: {
          'Content-Type': 'application/json'
        }
      })
      .then(response => response.json())
      .then(data => {
        console.log('Success:', data);
        
        // Show success message
        document.querySelector('.success-message').classList.remove('d-none');
        document.querySelector('.error-message').classList.add('d-none');
        
        // Submit the form to FormSubmit
        this.submit();
        
        // Reset the form after submission is complete
        setTimeout(() => {
          this.reset();
          this.classList.remove('was-validated');
          submitButton.innerHTML = originalButtonText;
          submitButton.disabled = false;
        }, 1000);
      })
      .catch((error) => {
        console.error('Error:', error);
        document.querySelector('.error-message').classList.remove('d-none');
        document.querySelector('.success-message').classList.add('d-none');
        
        // Reset button state
        submitButton.innerHTML = originalButtonText;
        submitButton.disabled = false;
      });
    });

    // Floating label effect
    document.addEventListener('DOMContentLoaded', function() {
      const inputs = document.querySelectorAll('.floating-label input, .floating-label textarea');
      
      inputs.forEach(input => {
        // Check initial state
        if (input.value.trim() !== '') {
          input.classList.add('has-value');
        }
        
        // Add focus event
        input.addEventListener('focus', () => {
          input.classList.add('focused');
        });
        
        // Add blur event
        input.addEventListener('blur', () => {
          input.classList.remove('focused');
          if (input.value.trim() === '') {
            input.classList.remove('has-value');
          } else {
            input.classList.add('has-value');
          }
        });
        
        // Add input event
        input.addEventListener('input', () => {
          if (input.value.trim() === '') {
            input.classList.remove('has-value');
          } else {
            input.classList.add('has-value');
          }
        });
      });
    });
  </script>

  <style>
    /* Base styles */
    .contact .icon-box {
      width: 50px;
      height: 50px;
    }
    
    .info-card {
      height: 100%;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
      background-color: #fff;
    }
    
    .contact-form-card {
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
      height: 100%;
      background-color: #fff;
    }

    /* Form styling */
    .form-control, .form-select {
      transition: all 0.3s ease;
      box-shadow: none !important;
    }
    
    .form-control:focus, .form-select:focus {
      border-color: #0d75ec;
      background-color: #f8fbff !important;
    }
    
    /* Floating label effect */
    .floating-label input::placeholder,
    .floating-label textarea::placeholder {
      color: transparent;
    }
    
    .floating-label input:focus + label,
    .floating-label textarea:focus + label,
    .floating-label input.has-value + label,
    .floating-label textarea.has-value + label {
      top: 0.3rem;
      font-size: 0.7rem;
      opacity: 0.7;
    }
    
    /* Button styling */
    .btn-primary {
      background: linear-gradient(135deg, #0d75ec 0%, #1a90ff 100%);
      border: none;
      transition: all 0.3s ease;
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 15px rgba(13, 117, 236, 0.3);
    }
    
    .btn-light:hover {
      background-color: #f8fbff;
      transform: translateY(-2px);
      box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
    }
    
    /* Hover effect */
    .hover-primary:hover {
      color: #0d75ec !important;
    }
    
    /* Alert styling */
    .alert {
      padding: 1rem;
      border-left: 4px solid;
    }
    
    .alert-success {
      background-color: #f0fdf4;
      border-left-color: #22c55e;
    }
    
    .alert-danger {
      background-color: #fef2f2;
      border-left-color: #ef4444;
    }
    
    /* Animation classes */
    .animate__animated {
      animation-duration: 0.8s;
    }
    
    /* Responsive tweaks */
    @media (max-width: 768px) {
      .section-title h2 {
        font-size: 2rem;
      }
      
      .info-card, .contact-form-card {
        padding: 1.5rem !important;
      }
    }

    /* Add animate.css for animations */
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    @keyframes fadeInLeft {
      from {
        opacity: 0;
        transform: translate3d(-50px, 0, 0);
      }
      to {
        opacity: 1;
        transform: translate3d(0, 0, 0);
      }
    }
    
    @keyframes fadeInRight {
      from {
        opacity: 0;
        transform: translate3d(50px, 0, 0);
      }
      to {
        opacity: 1;
        transform: translate3d(0, 0, 0);
      }
    }
    
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translate3d(0, 50px, 0);
      }
      to {
        opacity: 1;
        transform: translate3d(0, 0, 0);
      }
    }
    
    .animate__fadeIn {
      animation-name: fadeIn;
    }
    
    .animate__fadeInLeft {
      animation-name: fadeInLeft;
    }
    
    .animate__fadeInRight {
      animation-name: fadeInRight;
    }
    
    .animate__fadeInUp {
      animation-name: fadeInUp;
    }
    
    /* Utility classes */
    .rounded-4 {
      border-radius: 1rem !important;
    }
    
    .z-2 {
      position: relative;
      z-index: 2;
    }
    
    .bg-gradient-primary {
      background-image: linear-gradient(135deg, #0d75ec 0%, #1a90ff 100%);
    }
  </style>
  
  <script src="/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="/assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="/assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="/assets/vendor/swiper/swiper-bundle.min.js"></script>

  <!-- Template Main JS File -->
  <script src="/js/main.js"></script>
</main>
<%- include('partials/footer') %>
